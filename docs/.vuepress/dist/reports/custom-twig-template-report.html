<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Twig Template Reports | Sprout Documentation</title>
    <meta name="description" content="The Sprout Business Suite is a premium suite of plugins designed for businesses who want to use Craft CMS as the core of their content management and digital marketing workflows.">
    
    
    <link rel="preload" href="/docs/assets/css/146.styles.778e6548.css" as="style"><link rel="preload" href="/docs/assets/js/app.86e854cb.js" as="script"><link rel="preload" href="/docs/assets/js/37.b7564698.js" as="script"><link rel="prefetch" href="/docs/assets/js/61.77e5d5ec.js"><link rel="prefetch" href="/docs/assets/js/0.7fbe6b6a.js"><link rel="prefetch" href="/docs/assets/js/1.da1d6839.js"><link rel="prefetch" href="/docs/assets/js/2.9ff5a742.js"><link rel="prefetch" href="/docs/assets/js/3.e6dd643d.js"><link rel="prefetch" href="/docs/assets/js/4.22440e31.js"><link rel="prefetch" href="/docs/assets/js/5.13dfe8a3.js"><link rel="prefetch" href="/docs/assets/js/6.3c28ea8d.js"><link rel="prefetch" href="/docs/assets/js/7.930536dc.js"><link rel="prefetch" href="/docs/assets/js/8.7333cc02.js"><link rel="prefetch" href="/docs/assets/js/9.cb32d825.js"><link rel="prefetch" href="/docs/assets/js/10.fa8cef45.js"><link rel="prefetch" href="/docs/assets/js/11.d1892daa.js"><link rel="prefetch" href="/docs/assets/js/12.c52b3fb0.js"><link rel="prefetch" href="/docs/assets/js/13.57edc72e.js"><link rel="prefetch" href="/docs/assets/js/14.2ffde518.js"><link rel="prefetch" href="/docs/assets/js/15.9186216c.js"><link rel="prefetch" href="/docs/assets/js/16.4432c794.js"><link rel="prefetch" href="/docs/assets/js/17.8ebf687d.js"><link rel="prefetch" href="/docs/assets/js/18.d1f67ec7.js"><link rel="prefetch" href="/docs/assets/js/19.cf4f7e44.js"><link rel="prefetch" href="/docs/assets/js/20.1bd57592.js"><link rel="prefetch" href="/docs/assets/js/21.8bb07419.js"><link rel="prefetch" href="/docs/assets/js/22.dabe5a71.js"><link rel="prefetch" href="/docs/assets/js/23.12ce5b23.js"><link rel="prefetch" href="/docs/assets/js/24.22ad01fc.js"><link rel="prefetch" href="/docs/assets/js/25.f38d3652.js"><link rel="prefetch" href="/docs/assets/js/26.ebaae303.js"><link rel="prefetch" href="/docs/assets/js/27.99fb8966.js"><link rel="prefetch" href="/docs/assets/js/28.0dbc5ab8.js"><link rel="prefetch" href="/docs/assets/js/29.b5fde03f.js"><link rel="prefetch" href="/docs/assets/js/30.68a43507.js"><link rel="prefetch" href="/docs/assets/js/31.dbfe67eb.js"><link rel="prefetch" href="/docs/assets/js/32.76aa1617.js"><link rel="prefetch" href="/docs/assets/js/33.47625d51.js"><link rel="prefetch" href="/docs/assets/js/34.bb49ec8e.js"><link rel="prefetch" href="/docs/assets/js/35.bbdf0a79.js"><link rel="prefetch" href="/docs/assets/js/36.e91ba3fb.js"><link rel="prefetch" href="/docs/assets/js/38.e2508fef.js"><link rel="prefetch" href="/docs/assets/js/39.551b68cc.js"><link rel="prefetch" href="/docs/assets/js/40.7649493a.js"><link rel="prefetch" href="/docs/assets/js/41.bb10b996.js"><link rel="prefetch" href="/docs/assets/js/42.0359134d.js"><link rel="prefetch" href="/docs/assets/js/43.5e1c7362.js"><link rel="prefetch" href="/docs/assets/js/44.a8dab31d.js"><link rel="prefetch" href="/docs/assets/js/45.39ae46aa.js"><link rel="prefetch" href="/docs/assets/js/46.83bae8f6.js"><link rel="prefetch" href="/docs/assets/js/47.c0ce7907.js"><link rel="prefetch" href="/docs/assets/js/48.d87c2738.js"><link rel="prefetch" href="/docs/assets/js/49.ee2df04f.js"><link rel="prefetch" href="/docs/assets/js/50.ca8edd62.js"><link rel="prefetch" href="/docs/assets/js/51.80ac8050.js"><link rel="prefetch" href="/docs/assets/js/52.e57fdb13.js"><link rel="prefetch" href="/docs/assets/js/53.bca070a7.js"><link rel="prefetch" href="/docs/assets/js/54.95eedb61.js"><link rel="prefetch" href="/docs/assets/js/55.5ed914fd.js"><link rel="prefetch" href="/docs/assets/js/56.20f29960.js"><link rel="prefetch" href="/docs/assets/js/57.dfd91fad.js"><link rel="prefetch" href="/docs/assets/js/58.452c9b34.js"><link rel="prefetch" href="/docs/assets/js/59.2fe328d8.js"><link rel="prefetch" href="/docs/assets/js/60.e2ccb83f.js"><link rel="prefetch" href="/docs/assets/js/62.f5f6eb8f.js"><link rel="prefetch" href="/docs/assets/js/63.d045c17b.js"><link rel="prefetch" href="/docs/assets/js/64.c15447ec.js"><link rel="prefetch" href="/docs/assets/js/65.2b2a6727.js"><link rel="prefetch" href="/docs/assets/js/66.24340b37.js"><link rel="prefetch" href="/docs/assets/js/67.97828fae.js"><link rel="prefetch" href="/docs/assets/js/68.76e9d553.js"><link rel="prefetch" href="/docs/assets/js/69.20a68703.js"><link rel="prefetch" href="/docs/assets/js/70.711f9304.js"><link rel="prefetch" href="/docs/assets/js/71.07c5935e.js"><link rel="prefetch" href="/docs/assets/js/72.246c7a6c.js"><link rel="prefetch" href="/docs/assets/js/73.d9f6e645.js"><link rel="prefetch" href="/docs/assets/js/74.eee717a5.js"><link rel="prefetch" href="/docs/assets/js/75.b7669cbc.js"><link rel="prefetch" href="/docs/assets/js/76.2e77c529.js"><link rel="prefetch" href="/docs/assets/js/77.3b0406d4.js"><link rel="prefetch" href="/docs/assets/js/78.105d1fa8.js"><link rel="prefetch" href="/docs/assets/js/79.c5faeb35.js"><link rel="prefetch" href="/docs/assets/js/80.0f85ee07.js"><link rel="prefetch" href="/docs/assets/js/81.78b6ed5d.js"><link rel="prefetch" href="/docs/assets/js/82.82558b62.js"><link rel="prefetch" href="/docs/assets/js/83.884d26c3.js"><link rel="prefetch" href="/docs/assets/js/84.24bec6e6.js"><link rel="prefetch" href="/docs/assets/js/85.16d4d18a.js"><link rel="prefetch" href="/docs/assets/js/86.3eae843b.js"><link rel="prefetch" href="/docs/assets/js/87.7575c42e.js"><link rel="prefetch" href="/docs/assets/js/88.bf8c7c6b.js"><link rel="prefetch" href="/docs/assets/js/89.a2f6d739.js"><link rel="prefetch" href="/docs/assets/js/90.fd7a9388.js"><link rel="prefetch" href="/docs/assets/js/91.ff786001.js"><link rel="prefetch" href="/docs/assets/js/92.1243a7d7.js"><link rel="prefetch" href="/docs/assets/js/93.1081b641.js"><link rel="prefetch" href="/docs/assets/js/94.d34baf3c.js"><link rel="prefetch" href="/docs/assets/js/95.929142af.js"><link rel="prefetch" href="/docs/assets/js/96.02f47a87.js"><link rel="prefetch" href="/docs/assets/js/97.ca2a2934.js"><link rel="prefetch" href="/docs/assets/js/98.04ac635a.js"><link rel="prefetch" href="/docs/assets/js/99.626c8741.js"><link rel="prefetch" href="/docs/assets/js/100.402e4fad.js"><link rel="prefetch" href="/docs/assets/js/101.a86fe74d.js"><link rel="prefetch" href="/docs/assets/js/102.98c7af7b.js"><link rel="prefetch" href="/docs/assets/js/103.2735c234.js"><link rel="prefetch" href="/docs/assets/js/104.4397e52d.js"><link rel="prefetch" href="/docs/assets/js/105.a3cc37ad.js"><link rel="prefetch" href="/docs/assets/js/106.c4b75a03.js"><link rel="prefetch" href="/docs/assets/js/107.7ee1fa85.js"><link rel="prefetch" href="/docs/assets/js/108.b88f020b.js"><link rel="prefetch" href="/docs/assets/js/109.5f79a5f8.js"><link rel="prefetch" href="/docs/assets/js/110.cc3ca2da.js"><link rel="prefetch" href="/docs/assets/js/111.ce024857.js"><link rel="prefetch" href="/docs/assets/js/112.c6a55364.js"><link rel="prefetch" href="/docs/assets/js/113.5e60c16d.js"><link rel="prefetch" href="/docs/assets/js/114.83f61135.js"><link rel="prefetch" href="/docs/assets/js/115.fa143ccb.js"><link rel="prefetch" href="/docs/assets/js/116.80985358.js"><link rel="prefetch" href="/docs/assets/js/117.7e30ee74.js"><link rel="prefetch" href="/docs/assets/js/118.f816c56a.js"><link rel="prefetch" href="/docs/assets/js/119.deca6697.js"><link rel="prefetch" href="/docs/assets/js/120.7cf52e12.js"><link rel="prefetch" href="/docs/assets/js/121.a638e867.js"><link rel="prefetch" href="/docs/assets/js/122.10628314.js"><link rel="prefetch" href="/docs/assets/js/123.3a1d8af8.js"><link rel="prefetch" href="/docs/assets/js/124.3c85acbe.js"><link rel="prefetch" href="/docs/assets/js/125.dace93c4.js"><link rel="prefetch" href="/docs/assets/js/126.432b1586.js"><link rel="prefetch" href="/docs/assets/js/127.b9074335.js"><link rel="prefetch" href="/docs/assets/js/128.177fc0be.js"><link rel="prefetch" href="/docs/assets/js/129.abf95cc4.js"><link rel="prefetch" href="/docs/assets/js/130.c5a3e060.js"><link rel="prefetch" href="/docs/assets/js/131.2beebdf8.js"><link rel="prefetch" href="/docs/assets/js/132.35608e24.js"><link rel="prefetch" href="/docs/assets/js/133.3baf0e62.js"><link rel="prefetch" href="/docs/assets/js/134.73b7de81.js"><link rel="prefetch" href="/docs/assets/js/135.a5eb9d75.js"><link rel="prefetch" href="/docs/assets/js/136.23181d70.js"><link rel="prefetch" href="/docs/assets/js/137.10e6c119.js"><link rel="prefetch" href="/docs/assets/js/138.2c491c57.js"><link rel="prefetch" href="/docs/assets/js/139.8f44cfd3.js"><link rel="prefetch" href="/docs/assets/js/140.3298f1bf.js"><link rel="prefetch" href="/docs/assets/js/141.ac54bfeb.js"><link rel="prefetch" href="/docs/assets/js/142.cf000aed.js"><link rel="prefetch" href="/docs/assets/js/143.74b9c733.js"><link rel="prefetch" href="/docs/assets/js/144.370bfb7a.js"><link rel="prefetch" href="/docs/assets/js/145.3a7796d2.js">
    <link rel="stylesheet" href="/docs/assets/css/146.styles.778e6548.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/docs/" class="home-link router-link-active"><!----><span class="site-name">
      Sprout Documentation
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Plugin Docs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/forms/" class="nav-link">Sprout Forms</a></li><li class="dropdown-item"><!----><a href="/docs/seo/" class="nav-link">Sprout SEO</a></li><li class="dropdown-item"><!----><a href="/docs/email/" class="nav-link">Sprout Email</a></li><li class="dropdown-item"><!----><a href="/docs/reports/" class="nav-link router-link-active">Sprout Reports</a></li><li class="dropdown-item"><!----><a href="/docs/import/" class="nav-link">Sprout Import</a></li><li class="dropdown-item"><!----><a href="/docs/reports/.html" class="nav-link">–</a></li><li class="dropdown-item"><!----><a href="/docs/active/" class="nav-link">Sprout Active</a></li><li class="dropdown-item"><!----><a href="/docs/encode-email/" class="nav-link">Sprout Encode Email</a></li><li class="dropdown-item"><!----><a href="/docs/fields/" class="nav-link">Sprout Fields</a></li><li class="dropdown-item"><!----><a href="/docs/lists/" class="nav-link">Sprout Lists</a></li><li class="dropdown-item"><!----><a href="/docs/notes/" class="nav-link">Sprout Notes</a></li></ul></div></div><div class="nav-item"><a href="https://www.barrelstrengthdesign.com/" target="_blank" rel="noopener noreferrer" class="nav-link">Barrel Strength</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Plugin Docs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/forms/" class="nav-link">Sprout Forms</a></li><li class="dropdown-item"><!----><a href="/docs/seo/" class="nav-link">Sprout SEO</a></li><li class="dropdown-item"><!----><a href="/docs/email/" class="nav-link">Sprout Email</a></li><li class="dropdown-item"><!----><a href="/docs/reports/" class="nav-link router-link-active">Sprout Reports</a></li><li class="dropdown-item"><!----><a href="/docs/import/" class="nav-link">Sprout Import</a></li><li class="dropdown-item"><!----><a href="/docs/reports/.html" class="nav-link">–</a></li><li class="dropdown-item"><!----><a href="/docs/active/" class="nav-link">Sprout Active</a></li><li class="dropdown-item"><!----><a href="/docs/encode-email/" class="nav-link">Sprout Encode Email</a></li><li class="dropdown-item"><!----><a href="/docs/fields/" class="nav-link">Sprout Fields</a></li><li class="dropdown-item"><!----><a href="/docs/lists/" class="nav-link">Sprout Lists</a></li><li class="dropdown-item"><!----><a href="/docs/notes/" class="nav-link">Sprout Notes</a></li></ul></div></div><div class="nav-item"><a href="https://www.barrelstrengthdesign.com/" target="_blank" rel="noopener noreferrer" class="nav-link">Barrel Strength</a></div><!----></nav><ul class="sidebar-links"><li><a href="/docs/" class="sidebar-link">← All Plugins</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Introduction</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/reports/" class="sidebar-link">About Sprout Reports</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Core Concepts</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/reports/data-sources.html" class="sidebar-link">Data Sources</a></li><li><a href="/docs/reports/reports.html" class="sidebar-link">Reports</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Data Sources</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/reports/custom-query-report.html" class="sidebar-link">Custom Query Reports</a></li><li><a href="/docs/reports/custom-twig-template-report.html" class="active sidebar-link">Twig Template Reports</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/reports/custom-twig-template-report.html#template-settings" class="sidebar-link">Template Settings</a></li><li class="sidebar-sub-header"><a href="/docs/reports/custom-twig-template-report.html#results-template" class="sidebar-link">Results Template</a></li><li class="sidebar-sub-header"><a href="/docs/reports/custom-twig-template-report.html#settings-template" class="sidebar-link">Settings Template</a></li><li class="sidebar-sub-header"><a href="/docs/reports/custom-twig-template-report.html#using-settings-in-results" class="sidebar-link">Using Settings in Results</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Examples</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/reports/large-reports.html" class="sidebar-link">Large Reports</a></li><li><a href="/docs/reports/sql-queries.html" class="sidebar-link">Custom SQL Queries</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Plugin Development</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/reports/custom-data-sources.html" class="sidebar-link">Data Sources</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Installing &amp; Updating</span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/reports/installing-and-updating-craft-3.html" class="sidebar-link">Craft 3</a></li><li><a href="/docs/reports/installing-and-updating-craft-2.html" class="sidebar-link">Craft 2 </a></li></ul></div></li></ul></div><div class="page"><!----><div class="content"><h1>Twig Template Reports</h1><div><p>The <strong>Twig Template</strong> Data Source allows you to create reports in the Craft Control Panel using Twig Templates in your <code>craft/templates</code> folder.</p></div><iframe src="https://player.vimeo.com/video/248062317" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="allowfullscreen"></iframe><p>Setting up a Custom Twig Template report requires a couple of steps.</p><div><ol><li>Create a new Custom Twig Template Report</li><li>Add your Template Settings</li><li>Customize your Report's <code>Results Template</code> and <code>Options Template</code> settings</li></ol></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>See the Sprout Reports <code>examples/templates</code> folders for commented example files of Twig Template Reports and Options Templates. Copy those files to your <code>craft/template</code> folder and setup a Twig Template report to use them as described below.</p></div><h2 id="template-settings"><a href="#template-settings" aria-hidden="true" class="header-anchor">#</a> Template Settings</h2><p>To setup a Twig Template report you need to build a Results Template. Identifying your Results Template is the one required component of your Custom Twig Template report. The report template settings behave just like the Craft Sections 'Entry Template' setting.</p><div><ul><li><strong>Results Template</strong> (required) - <code>_reports/reportname/results</code></li><li><strong>Options Template</strong> - <code>_reports/reportname/options</code></li></ul></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Sprout Reports will look for your templates in your front-end <code>craft/templates</code> folder so it's a good idea to use a hidden folder that can't be accessed directly from the web.</p></div><h2 id="results-template"><a href="#results-template" aria-hidden="true" class="header-anchor">#</a> Results Template</h2><p>Your Results Template is where you will build your report. A report consists of any number of rows. Rows must each have an equal number of columns.</p><p>Sprout Reports gives you three helper variables to use when building reports:</p><div class="table"><table><thead><tr><th style="text-align:left">Variable</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><strong>craft.sproutReports.addHeaderRow()</strong></td><td style="text-align:left">Define the columns in the first row of your report</td></tr><tr><td style="text-align:left"><strong>craft.sproutReports.addRow()</strong></td><td style="text-align:left">Add a single row of data to your report</td></tr><tr><td style="text-align:left"><strong>craft.sproutReports.addRows()</strong></td><td style="text-align:left">Add an array of multiple rows of data to your report</td></tr></tbody></table></div><div><p>You can use <code>addHeaderRow</code> anywhere in your template to define the first row in your report that will be used as the column headers. The <code>addRow</code> and <code>addRows</code> actions add rows to your report in the order that they are used in your template.</p></div><p>Here is a simple, hard-coded example of each tag in use for a two-column report:</p><h3 id="craft-templates-reports-reportname-results-html"><a href="#craft-templates-reports-reportname-results-html" aria-hidden="true" class="header-anchor">#</a> craft/templates/_reports/reportname/results.html</h3><div class="language-twig extra-class"><pre class="language-twig"><code><span class="token comment">{# addHeaderRow accepts a single array with a comma-separated list of values #}</span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">craft</span><span class="token punctuation">.</span><span class="token property">sproutReports</span><span class="token punctuation">.</span><span class="token property">addHeaderRow</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string"><span class="token punctuation">'</span>Region<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>Trip Name<span class="token punctuation">'</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>

<span class="token comment">{# addRow, also accepts a single array with a comma-separated list of values. The array is defined by the opening and closing square brackets. #}</span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">craft</span><span class="token punctuation">.</span><span class="token property">sproutReports</span><span class="token punctuation">.</span><span class="token property">addRow</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token string"><span class="token punctuation">'</span>Europe<span class="token punctuation">'</span></span><span class="token punctuation">,</span> 
  <span class="token string"><span class="token punctuation">'</span>Camino de Santiago<span class="token punctuation">'</span></span>
<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>

<span class="token comment">{# addRows, accepts an array of arrays, where each array includes a comma-separated list of values. Note that there are two levels of opening and closing square brackets. #}</span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">craft</span><span class="token punctuation">.</span><span class="token property">sproutReports</span><span class="token punctuation">.</span><span class="token property">addRows</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string"><span class="token punctuation">'</span>North America<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>John Muir Trail<span class="token punctuation">'</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string"><span class="token punctuation">'</span>Asia<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>Langtang Trek<span class="token punctuation">'</span></span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>
</code></pre></div><h2 id="settings-template"><a href="#settings-template" aria-hidden="true" class="header-anchor">#</a> Settings Template</h2><p>If you want to give your user control over some Settings when they generate a Report, you can do so by defining an Settings Template.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Use the Form Macros supported by the Craft CP to keep consistent with the Craft UI. Sprout Reports will import the Craft CP Form Macros. Your Options Template can look like this where the imported <code>forms</code> variable includes all Craft form macros defined in <code>craft/app/templates/_includes/forms.html</code>. :</p></div><h3 id="craft-templates-reports-reportname-options-html"><a href="#craft-templates-reports-reportname-options-html" aria-hidden="true" class="header-anchor">#</a> craft/templates/_reports/reportname/options.html</h3><div class="language-twig extra-class"><pre class="language-twig"><code><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">forms</span><span class="token punctuation">.</span><span class="token property">textField</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token property">label</span><span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Limit<span class="token punctuation">&quot;</span></span><span class="token operator">|</span><span class="token property">t</span><span class="token punctuation">,</span>
	<span class="token property">name</span><span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>limit<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
	<span class="token property">size</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
	<span class="token property">value</span><span class="token punctuation">:</span> <span class="token property">options</span><span class="token punctuation">.</span><span class="token property">quantity</span> <span class="token operator">is</span> <span class="token property">defined</span> <span class="token operator">?</span> <span class="token property">options</span><span class="token punctuation">.</span><span class="token property">quantity</span> <span class="token punctuation">:</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token property">first</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span>

<span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">forms</span><span class="token punctuation">.</span><span class="token property">selectField</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token property">label</span><span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Region<span class="token punctuation">&quot;</span></span><span class="token operator">|</span><span class="token property">t</span><span class="token punctuation">,</span>
	<span class="token property">name</span><span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>region<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
	<span class="token property">options</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string"><span class="token punctuation">&quot;</span>africa<span class="token punctuation">&quot;</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Africa<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
		<span class="token string"><span class="token punctuation">&quot;</span>antartica<span class="token punctuation">&quot;</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Antartica<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
		<span class="token string"><span class="token punctuation">&quot;</span>asia<span class="token punctuation">&quot;</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Asia<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
		<span class="token string"><span class="token punctuation">&quot;</span>australia<span class="token punctuation">&quot;</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Australia<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
		<span class="token string"><span class="token punctuation">&quot;</span>europe<span class="token punctuation">&quot;</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Europe<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
		<span class="token string"><span class="token punctuation">&quot;</span>northAmerica<span class="token punctuation">&quot;</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>North America<span class="token punctuation">&quot;</span></span><span class="token punctuation">,</span>
		<span class="token string"><span class="token punctuation">&quot;</span>southAmerica<span class="token punctuation">&quot;</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>South America<span class="token punctuation">&quot;</span></span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">value</span><span class="token punctuation">:</span> <span class="token property">options</span><span class="token punctuation">.</span><span class="token property">region</span> <span class="token operator">is</span> <span class="token property">defined</span> <span class="token operator">?</span> <span class="token property">options</span><span class="token punctuation">.</span><span class="token property">region</span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">&quot;</span>Antartica<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span>
</code></pre></div><div><p>All Settings are available to you via the <code>options</code> variable. Be sure to test if they exist. See an example Option Template with several common fields in the Sprout Reports <code>examples/templates</code> folder.</p></div><ul><li>Text</li><li>Textarea</li><li>Dropdown</li><li>Radio Buttons</li><li>Checkboxes</li><li>Lightswitch</li><li>DateTime (requires that you start the field name with &quot;datetime&quot;, i.e. 'datetimeStartDate')</li></ul><p>Examples also include how to toggle the display of conditional fields and how to use DateTime fields which require some additional steps. Additional field types can be used, but some fields with advanced validation may require that you create a <a href="/docs/reports/custom-data-sources.html">Custom Data Source</a>. The only field Twig Template Reports support with advanced validation requirements is the DateTime field.</p><h2 id="using-settings-in-results"><a href="#using-settings-in-results" aria-hidden="true" class="header-anchor">#</a> Using Settings in Results</h2><p>When a user runs a report, all Options will be passed to the Results Template and can be used in your Options Template Twig code to help query and display data how you wish:</p><h3 id="reports-reportname-results-html"><a href="#reports-reportname-results-html" aria-hidden="true" class="header-anchor">#</a> reports/reportname/results.html</h3><div class="language-twig extra-class"><pre class="language-twig"><code><span class="token comment">{# In this example we use our options to retrieve a CategoryModel and then use that CategoryModel to retrieve all Trips that relate to that Category. We limit the results by the number provided by the user in the Limit option. #}</span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">set</span></span> <span class="token property">region</span> <span class="token operator">=</span> <span class="token property">craft</span><span class="token punctuation">.</span><span class="token property">categories</span><span class="token punctuation">.</span><span class="token property">group</span><span class="token punctuation">(</span><span class="token property">options</span><span class="token punctuation">.</span><span class="token property">region</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">set</span></span> <span class="token property">trips</span> <span class="token operator">=</span> <span class="token property">craft</span><span class="token punctuation">.</span><span class="token property">entries</span><span class="token punctuation">.</span><span class="token property">section</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>trips<span class="token punctuation">'</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property">relatedTo</span><span class="token punctuation">(</span><span class="token property">region</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property">limit</span><span class="token punctuation">(</span><span class="token property">options</span><span class="token punctuation">.</span><span class="token property">limit</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>

<span class="token comment">{# Create a Header Row #}</span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">craft</span><span class="token punctuation">.</span><span class="token property">sproutReports</span><span class="token punctuation">.</span><span class="token property">addHeaderRow</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string"><span class="token punctuation">'</span>Region<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>Trip Name<span class="token punctuation">'</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>

<span class="token comment">{# Loop through our trips and output the Region and Trip Name for each result #}</span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">for</span></span> <span class="token property">trip</span> <span class="token operator">in</span> <span class="token property">trips</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>
	<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">craft</span><span class="token punctuation">.</span><span class="token property">sproutReports</span><span class="token punctuation">.</span><span class="token property">addRow</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  	<span class="token property">trip</span><span class="token punctuation">.</span><span class="token property">relatedCategory</span><span class="token punctuation">.</span><span class="token property">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property">title</span><span class="token punctuation">,</span> 
		<span class="token property">trip</span><span class="token punctuation">.</span><span class="token property">title</span>
	<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span>
<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfor</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span>
</code></pre></div></div><div class="content edit-link"><a href="https://github.com/barrelstrength/sprout-docs/edit/develop/docs/reports/custom-twig-template-report.md" target="_blank" rel="noopener noreferrer">Edit this page</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs/reports/custom-query-report.html" class="prev">
          Custom Query Reports
        </a></span><span class="next"><a href="/docs/reports/large-reports.html">
          Large Reports
        </a> →
      </span></p></div></div></div></div>
    <script src="/docs/assets/js/37.b7564698.js" defer></script><script src="/docs/assets/js/app.86e854cb.js" defer></script>
  </body>
</html>
